function config($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/index/principal"),$stateProvider.state("index",{abstract:!0,url:"/index",templateUrl:"views/common/content.html"}).state("index.main",{url:"/principal",templateUrl:"components/principal/principal.view.html",controller:"PrincipalController",controllerAs:"ctrl",data:{pageTitle:"Example view"}}).state("index.cadastrarPaciente",{url:"/paciente/cadastrar",templateUrl:"components/paciente/paciente.cadastrar.view.html",controller:"CadastrarPacienteController",controllerAs:"ctrl"}).state("index.gerenciarPaciente",{url:"/paciente/gerenciar",templateUrl:"components/paciente/paciente.gerenciar.view.html",controller:"GerenciarPacienteController",controllerAs:"ctrl"}).state("index.cadastrarCuidador",{url:"/cuidador/cadastrar",templateUrl:"components/cuidador/cuidador.cadastrar.view.html",controller:"CadastrarCuidadorController",controllerAs:"ctrl"}).state("login",{url:"/login",whitelisted:!0,templateUrl:"components/login/login.view.html",controller:"LoginController",controllerAs:"ctrl"})}function pageTitle($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="INSPINIA | Responsive Admin Theme";toState.data&&toState.data.pageTitle&&(title="INSPINIA | "+toState.data.pageTitle),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}function sideNavigation($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.metisMenu()})}}}function iboxTools($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first"),content=ibox.find("div.ibox-content");content.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var ibox=$element.closest("div.ibox");ibox.remove()}}}}function minimalizaSidebar($timeout){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function($scope,$element){$scope.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}}}}function iboxToolsFullScreen($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools_full_screen.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first"),content=ibox.find("div.ibox-content");content.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var ibox=$element.closest("div.ibox");ibox.remove()},$scope.fullscreen=function(){var ibox=$element.closest("div.ibox"),button=$element.find("i.fa-expand");$("body").toggleClass("fullscreen-ibox-mode"),button.toggleClass("fa-expand").toggleClass("fa-compress"),ibox.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}}}function MainCtrl($scope,$state){$scope.logout=function(){localStorage.removeItem("token"),$state.go("login")}}$(document).ready(function(){function fix_height(){var heightWithoutNavbar=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",heightWithoutNavbar+"px");var navbarHeigh=$("nav.navbar-default").height(),wrapperHeigh=$("#page-wrapper").height();navbarHeigh>wrapperHeigh&&$("#page-wrapper").css("min-height",navbarHeigh+"px"),navbarHeigh<wrapperHeigh&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(navbarHeigh>wrapperHeigh?$("#page-wrapper").css("min-height",navbarHeigh-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||fix_height()}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),setTimeout(function(){fix_height()}),toastr.options.closeButton=!0,toastr.options.progressBar=!0}),$(function(){$(window).bind("load resize",function(){$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),function(){"use strict";angular.module("smartcare.login",[])}(),function(){"use strict";function LoginController($scope,LoginService,$state){function autenticar(){return vm.formulario.$setSubmitted(),vm.formulario.$valid?void LoginService.autenticar(vm.login,vm.senha).success(function(data){data.success?(localStorage.setItem("token",data.token),$state.go("index.main")):toastr.error(data.errBody)}):void toastr.error("Existem erros no formulário. Por favor, verifique os campos marcados em vermelho.")}var vm=this;vm.autenticar=autenticar}angular.module("smartcare.login").controller("LoginController",LoginController),LoginController.$inject=["$scope","LoginService","$state"]}(),function(){"use strict";function LoginService($http,$q,API_URL){function autenticar(login,senha){return $http.post(API_URL+"/login",{login:login,senha:senha})}var service={};return service.autenticar=autenticar,service}angular.module("smartcare.login").factory("LoginService",LoginService),LoginService.$inject=["$http","$q","API_URL"]}(),function(){"use strict";angular.module("smartcare.pacientes",[])}(),function(){"use strict";function PacientesService($http,$q,API_URL){function inserir(paciente){return $http.post(API_URL+"/api/usuario",{usuario:paciente})}function listar(){return $http.get(API_URL+"/api/usuario")}function desassociarCuidador(params){return $http.post(API_URL+"/api/desassociar/"+params.idPaciente+"/"+params.idCuidador,{token:"DAOSIFJASIOF",abc:"123"})}function consultarDadosArduino(params){return $http.get(API_URL+"/api/arduino/"+params.idArduino)}var service={};return service.inserir=inserir,service.listar=listar,service.desassociarCuidador=desassociarCuidador,service.consultarDadosArduino=consultarDadosArduino,service}angular.module("smartcare.pacientes").factory("PacientesService",PacientesService),PacientesService.$inject=["$http","$q","API_URL"]}(),function(){"use strict";function CadastrarPacienteController(PacientesService){function cadastrarPaciente(){return vm.formulario.$setSubmitted(),vm.formulario.$valid?(vm.paciente.tp_acesso="pacientes",void PacientesService.inserir(vm.paciente).success(function(data){data.success?(toastr.success("Paciente cadastrado com sucesso!"),vm.paciente={}):toastr.error("Erro ao cadastrar paciente :(")})):void toastr.error("Existem erros no formulário. Por favor, verifique os campos marcados em vermelho.")}var vm=this;vm.formulario={},vm.paciente={},vm.cadastrarPaciente=cadastrarPaciente}angular.module("smartcare.pacientes").controller("CadastrarPacienteController",CadastrarPacienteController),CadastrarPacienteController.$inject=["PacientesService"]}(),function(){"use strict";function GerenciarPacienteController($scope,PacientesService){function editarPaciente(paciente){vm.pacienteSelecionado=null,PacientesService.consultarDadosArduino({idArduino:paciente.idArduino}).success(function(data){return data.success?(vm.pacienteSelecionado=paciente,void(vm.pacienteSelecionado.registros=data.result.docs)):void toastr.error("Erro ao consultar dados do paciente")})}function removerCuidador(cuidador,index){PacientesService.desassociarCuidador({idPaciente:vm.pacienteSelecionado._id,idCuidador:cuidador._id}).success(function(data){data.success?vm.pacienteSelecionado.cuidadores.splice(index,1):toastr.error(data.errBody||"Erro ao remover cuidador")})}var vm=this;vm.pacientes=[],vm.pacienteSelecionado=null,vm.tab=1,vm.editarPaciente=editarPaciente,vm.removerCuidador=removerCuidador,PacientesService.listar().success(function(data){data.success?vm.pacientes=data.result.docs:toastr.error("Erro ao consultar pacientes")})}angular.module("smartcare.pacientes").controller("GerenciarPacienteController",GerenciarPacienteController),GerenciarPacienteController.$inject=["$scope","PacientesService"]}(),function(){"use strict";angular.module("smartcare.cuidadores",[])}(),function(){"use strict";function CuidadoresService($http,$q){function inserir(paciente){return{success:function(callback){setTimeout(function(){return callback({success:!0})},1500)}}}function listar(){return{success:function(callback){setTimeout(function(){var pacientes=[{nome:"Alvaro",email:"alvaro.dasmerces@gmail.com",dt_nascimento:"25/03/1992",nome:"Alvaro 2",email:"alvaro.dasmerces@gmail.com",dt_nascimento:"13/06/1995",nome:"Alvaro 3",email:"alvaro.dasmerces@gmail.com",dt_nascimento:"01/09/2002"}];return callback({success:!0,pacientes:pacientes})},1500)}}}var service={};return service.inserir=inserir,service.listar=listar,service}angular.module("smartcare.cuidadores").factory("CuidadoresService",CuidadoresService),CuidadoresService.$inject=["$http","$q"]}(),function(){"use strict";function CadastrarCuidadorController(CuidadoresService){function cadastrarCuidador(){return vm.formulario.$setSubmitted(),vm.formulario.$valid?void CuidadoresService.inserir(vm.paciente).success(function(data){data.success?(toastr.success("Cuidador cadastrado com sucesso!"),vm.paciente={}):toastr.error("Erro ao cadastrar cuidador :(")}):void toastr.error("Existem erros no formulário. Por favor, verifique os campos marcados em vermelho.")}var vm=this;vm.formulario={},vm.paciente={},vm.cadastrarCuidador=cadastrarCuidador}angular.module("smartcare.cuidadores").controller("CadastrarCuidadorController",CadastrarCuidadorController),CadastrarCuidadorController.$inject=["CuidadoresService"]}(),function(){"use strict";angular.module("smartcare.principal",[])}(),function(){"use strict";function PrincipalController(PrincipalService){var vm=this;vm.numPacientes=0,vm.numCuidadores=0,vm.numRegistrosArduino=0,PrincipalService.consultarDadosDashboard().success(function(data){return console.log(data),data.success?(vm.numPacientes=data.result.totais.pacientes,vm.numCuidadores=data.result.totais.cuidadores,void(vm.numRegistrosArduino=data.result.totais.arduino)):void toastr.error("Erro ao consultar dashboard")})}angular.module("smartcare.principal").controller("PrincipalController",PrincipalController),PrincipalController.$inject=["PrincipalService"]}(),function(){"use strict";function PrincipalService($http,$q,API_URL){function consultarDadosDashboard(){return $http.get(API_URL+"/api/dashboard")}var service={};return service.consultarDadosDashboard=consultarDadosDashboard,service}angular.module("smartcare.principal").factory("PrincipalService",PrincipalService),PrincipalService.$inject=["$http","$q","API_URL"]}(),function(){angular.module("smartcare",["ui.router","ui.bootstrap","smartcare.pacientes","smartcare.cuidadores","smartcare.login","smartcare.principal"])}(),angular.module("smartcare").constant("API_URL","https://smartcare-back-eonfow.c9users.io").config(config).run(function($rootScope,$state,$location){$rootScope.$state=$state;var token=localStorage.getItem("token");token||localStorage.removeItem("token"),$rootScope.$on("$stateChangeStart",function(event,toState,toParams){toState.whitelisted||localStorage.getItem("token")||(event.preventDefault(),$state.go("login"))})}),angular.module("smartcare").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("iboxTools",iboxTools).directive("minimalizaSidebar",minimalizaSidebar).directive("iboxToolsFullScreen",iboxToolsFullScreen),angular.module("smartcare").controller("MainCtrl",MainCtrl);